import{P as T}from"./PageTemplate-a66ebae3.js";import{Z as k,j as w,l as p,o,c as D,w as u,a as h,b as e,d as l,t as a,f as r,F as f,r as y,g as _,x as L,y as S}from"./app-d8717654.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./GuestLayout-1c44c54a.js";import"./ResponsiveNavLink-f4e51f3c.js";import"./AuthenticatedLayout-c40e29bb.js";const O={props:{cases:{type:Array,required:!0},search:{type:String,required:!1}},components:{PageTemplate:T,Head:k,Link:w},data(){return{searchTerm:this.search}},computed:{filteredCases(){if(!this.searchTerm)return this.cases;const i=this.searchTerm.toLowerCase();return this.cases.filter(d=>Object.values(d).some(g=>String(g).toLowerCase().includes(i)))},numberOfCases(){return this.filteredCases.length},filteredKeys(){return Object.keys(this.filteredCases[0]).filter(i=>!["predictions","case_title","case_enquiry_id","open_dt","sla_target_dt"].includes(i))}},methods:{updateSearchTerm(i){this.searchTerm=i.target.value},fetchCases(){this.$inertia.get("/cases",{searchTerm:this.searchTerm})},convertToDaysRange(i){const g=Math.floor(i[0]/24),b=Math.floor(i[1]/24);return`${g} - ${b} days`}}},s=i=>(L("data-v-a8015cf0"),i=i(),S(),i),P=s(()=>e("title",null,"311 Case List",-1)),I=s(()=>e("meta",{property:"og:title",content:"311 Case List"},null,-1)),B=s(()=>e("meta",{property:"og:description",content:"A comprehensive list of Boston 311 cases with detailed predictions and insights."},null,-1)),j=s(()=>e("meta",{property:"og:image",content:"https://bodc-dei.com/images/logo.jpeg"},null,-1)),F=s(()=>e("meta",{property:"og:url",content:"https://bodc-dei.com/cases"},null,-1)),N=s(()=>e("meta",{property:"og:type",content:"website"},null,-1)),q=s(()=>e("meta",{property:"og:site_name",content:"311 Case Management"},null,-1)),A=s(()=>e("meta",{name:"twitter:card",content:"summary_large_image"},null,-1)),R=s(()=>e("meta",{name:"twitter:title",content:"311 Case List"},null,-1)),V=s(()=>e("meta",{name:"twitter:description",content:"A comprehensive list of Boston 311 cases with detailed predictions and insights."},null,-1)),H=s(()=>e("meta",{name:"twitter:image",content:"https://bodc-dei.com/images/logo.jpeg"},null,-1)),E=s(()=>e("meta",{name:"twitter:site",content:"@BODC-DEI"},null,-1)),K={class:"border p-4 rounded shadow items-center space-4 bg-gray-100 overflow-wrap"},Z={class:"bg-gray-100 p-8"},z={class:"flex flex-col items-center"},G=["value"],J={class:"text-lg font-semibold mt-6 text-center"},Q={key:0,class:"mt-6"},U={class:"flex justify-between items-center"},W={class:"text-lg font-bold"},X={class:"mt-2"},Y={key:0},$={key:0,class:"mt-4"},ee=s(()=>e("h4",{class:"text-lg font-bold"},"Predictions",-1)),te={class:"mt-2"},se=s(()=>e("strong",null,"Model:",-1)),oe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"},ne=s(()=>e("div",{class:"font-semibold"},"Predicted Days to Close:",-1)),ae={key:0},re=s(()=>e("strong",null,"First:",-1)),ie={key:1},ce=s(()=>e("strong",null,"Second:",-1)),le={key:2},de=s(()=>e("strong",null,"Third:",-1)),ue=["onClick"],_e=["onClick"],he={key:3,class:"mt-4"},ge=s(()=>e("h4",{class:"text-lg font-bold"},"Case Details",-1)),me={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4"},pe={class:"font-semibold"},fe={class:"overflow-auto"},ye={key:1,class:"text-center mt-6 text-xl"};function be(i,d,g,b,v,c){const x=p("Head"),m=p("Link"),C=p("PageTemplate");return o(),D(C,null,{default:u(()=>[h(x,null,{default:u(()=>[P,I,B,j,F,N,q,A,R,V,H,E]),_:1}),e("div",K,[h(m,{href:"/cases",class:"inline-block px-6 py-3 bg-gray-500 text-gray-100 font-semibold rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 transition ease-in-out duration-150 m-2"},{default:u(()=>[l(" Case List ")]),_:1}),h(m,{href:"/scatter",class:"inline-block px-6 py-3 bg-gray-500 text-gray-100 font-semibold rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 transition ease-in-out duration-150 m-2"},{default:u(()=>[l(" Case Map ")]),_:1}),h(m,{href:"/311models",class:"inline-block px-6 py-3 bg-gray-500 text-gray-100 font-semibold rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 transition ease-in-out duration-150 m-2"},{default:u(()=>[l(" Model Info ")]),_:1}),h(m,{href:"/311demo",class:"inline-block px-6 py-3 bg-gray-500 text-gray-100 font-semibold rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 transition ease-in-out duration-150 m-2"},{default:u(()=>[l(" Notebook Demo ")]),_:1})]),e("main",Z,[e("div",z,[e("input",{value:v.searchTerm,onInput:d[0]||(d[0]=(...t)=>c.updateSearchTerm&&c.updateSearchTerm(...t)),placeholder:"Search...",type:"text",class:"form-input mt-1 block w-full border-none bg-white h-11 rounded-xl shadow-lg hover:bg-blue-100 focus:bg-blue-100 focus:ring-0"},null,40,G),e("button",{onClick:d[1]||(d[1]=(...t)=>c.fetchCases&&c.fetchCases(...t)),class:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Search ")]),e("section",J,"Total number of cases: "+a(c.numberOfCases),1),c.filteredCases.length?(o(),r("div",Q,[(o(!0),r(f,null,y(c.filteredCases,t=>(o(),r("div",{key:t.case_enquiry_id,class:"bg-white rounded-lg shadow-lg p-4 mb-6"},[e("div",U,[e("h3",W,a(t.case_title),1),e("span",null,"Case ID: "+a(t.case_enquiry_id),1)]),e("div",X,[e("div",null,"Date: "+a(t.open_dt),1),e("div",null,"SLA: "+a(t.sla_target_dt),1),e("div",null,"Status: "+a(t.case_status),1),t.closed_dt?(o(),r("div",Y,"Closed date: "+a(t.closed_dt),1)):_("",!0)]),t.predictions.length?(o(),r("div",$,[ee,e("div",te,[se,l(" "+a(t.predictions[0].ml_model_name),1)]),e("div",oe,[(o(!0),r(f,null,y(t.predictions,n=>(o(),r("div",{key:n.id,class:"flex flex-col"},[ne,e("ul",null,[n.predictionTimespan.length>0?(o(),r("li",ae,[re,l(" "+a(c.convertToDaysRange(n.predictionTimespan[0]))+" ("+a((n.predictionMaxThree[0]*100).toFixed(2))+"%)",1)])):_("",!0),n.predictionTimespan.length>1?(o(),r("li",ie,[ce,l(" "+a(c.convertToDaysRange(n.predictionTimespan[1]))+" ("+a((n.predictionMaxThree[1]*100).toFixed(2))+"%)",1)])):_("",!0),n.predictionTimespan.length>2?(o(),r("li",le,[de,l(" "+a(c.convertToDaysRange(n.predictionTimespan[2]))+" ("+a((n.predictionMaxThree[2]*100).toFixed(2))+"%)",1)])):_("",!0)])]))),128))])])):_("",!0),t.showDetails?(o(),r("button",{key:2,onClick:n=>t.showDetails=!1,class:"text-indigo-600 hover:text-indigo-900"}," - Less Details ",8,_e)):(o(),r("button",{key:1,onClick:n=>t.showDetails=!0,class:"text-indigo-600 hover:text-indigo-900"}," + More Details ",8,ue)),t.showDetails?(o(),r("div",he,[ge,e("div",me,[(o(!0),r(f,null,y(c.filteredKeys,n=>(o(),r("div",{key:n},[e("div",pe,a(n),1),e("div",fe,a(t[n]),1)]))),128))])])):_("",!0)]))),128))])):(o(),r("div",ye,"No cases found."))])]),_:1})}const De=M(O,[["render",be],["__scopeId","data-v-a8015cf0"]]);export{De as default};
